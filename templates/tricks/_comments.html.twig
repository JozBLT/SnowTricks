{% if app.user and app.user.isVerified %}
    {{ form_start(commentForm, {'action': path('comment.create', {'id': tricks.id})}) }}
    <div class="flex flex-col items-center md:w-4/5 mx-auto space-y-4">
        <div class="w-full">
            {{ form_widget(commentForm.content, {'attr': {'class': 'w-full rounded-lg border-gray-300 shadow-sm', 'rows': 4}}) }}
        </div>
        <div class="flex justify-end w-full">
            {{ form_widget(commentForm.save) }}
        </div>
    </div>
    <hr class="w-4/5 mt-8 border-t-2 border-gray-300 mx-auto">
    {{ form_end(commentForm) }}
{% else %}
    <div class="text-center">
        <p>
            <a href="{{ path('login') }}"
               class="text-blue-500 underline">Vous devez être connecté pour commenter ce post.</a>
        </p>
    </div>
    <hr class="w-4/5 mt-8 border-t-2 border-gray-300 mx-auto">
{% endif %}

<div class="text-center">
    {% if comments|length > 0 %}
        <ul class="space-y-4 w-full lg:w-1/2 mx-auto">
            {% for comment in comments %}
                <li class="border border-gray-300 rounded-lg p-4 shadow-sm">
                    <span class="font-bold">{{ comment.author ? comment.author.username : 'Utilisateur inconnu' }} :</span>
                    <p class="text-gray-700" style="word-break: break-word;">{{ comment.content }}</p>
                    <p class="text-sm text-gray-500 mt-1">Posté le {{ comment.createdAt|date('d/m/Y') }}</p>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="mb-2">Aucun commentaire pour le moment. Soyez le premier à commenter !</p>
    {% endif %}
</div>
